"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = require("react");

var _core = require("@emotion/core");

var _components = _interopRequireDefault(require("@atlaskit/theme/components"));

var _utils = require("./utils");

var _styles = require("./styles");

function _templateObject() {
  var data = (0, _taggedTemplateLiteral2.default)(["\n            display: inline-block;\n            ", "\n            flex-shrink: 0;\n            line-height: 1;\n\n            > svg {\n              ", "\n              max-height: 100%;\n              max-width: 100%;\n              vertical-align: bottom;\n              ", "\n            }\n          "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

var Icon = /*#__PURE__*/(0, _react.memo)(function Icon(props) {
  var _ref = props,
      Glyph = _ref.glyph,
      dangerouslySetGlyph = _ref.dangerouslySetGlyph,
      primaryColor = _ref.primaryColor,
      secondaryColor = _ref.secondaryColor,
      size = _ref.size,
      testId = _ref.testId,
      label = _ref.label,
      width = _ref.width,
      height = _ref.height;
  var glyphProps = dangerouslySetGlyph ? {
    dangerouslySetInnerHTML: {
      __html: dangerouslySetGlyph
    }
  } : {
    children: Glyph ? (0, _core.jsx)(Glyph, {
      role: "presentation"
    }) : null
  };
  var dimensions = (0, _styles.getSizeStyles)({
    width: width,
    height: height,
    size: size
  });
  return (0, _core.jsx)(_components.default.Consumer, null, function (_ref2) {
    var mode = _ref2.mode;
    return (0, _core.jsx)("span", (0, _extends2.default)({
      "data-testid": testId,
      role: label ? 'img' : 'presentation',
      "aria-label": label ? label : undefined
    }, glyphProps, {
      /**
       * The size dimensions on the span element have dubious value and can be removed
       * when/if icon is overhauled futher. Lite Mode didn't have the capacity to deal
       * with fully investigating the impact of this change,
       * but in _most_ cases they are not required.
       *
       * @see getSizeStyles for more info
       */
      css: (0, _core.css)(_templateObject(), dimensions, dimensions, (0, _styles.getSVGStyles)({
        primaryColor: primaryColor,
        secondaryColor: secondaryColor || (0, _utils.getBackground)(mode)
      }))
    }));
  });
});
var _default = Icon;
exports.default = _default;